
[xu0t11915@owctdbadm01 ~]$ dzdo su - oracle
Last login: Tue Feb  9 11:53:39 +03 2021
[oracle@owctdbadm01 ~]$ . .CARDTEST1.env 
[oracle@owctdbadm01 ~]$ /u01/app/oracle/product/11.2.0.4/dbhome_3/jdk/bin/java -jar /u01/app/oracle/product/19.0.0.0/dbhome_3/rdbms/admin/preupgrade.jar
==================
PREUPGRADE SUMMARY
==================
  /u01/app/oracle/product/11.2.0.4/dbhome_3/cfgtoollogs/CARDTEST/preupgrade/preupgrade.log
  /u01/app/oracle/product/11.2.0.4/dbhome_3/cfgtoollogs/CARDTEST/preupgrade/preupgrade_fixups.sql
  /u01/app/oracle/product/11.2.0.4/dbhome_3/cfgtoollogs/CARDTEST/preupgrade/postupgrade_fixups.sql

Execute fixup scripts as indicated below:

Before upgrade:

Log into the database and execute the preupgrade fixups
@/u01/app/oracle/product/11.2.0.4/dbhome_3/cfgtoollogs/CARDTEST/preupgrade/preupgrade_fixups.sql

After the upgrade:

Log into the database and execute the postupgrade fixups
@/u01/app/oracle/product/11.2.0.4/dbhome_3/cfgtoollogs/CARDTEST/preupgrade/postupgrade_fixups.sql

Preupgrade complete: 2021-02-09T10:56:20
[oracle@owctdbadm01 ~]$ cat /u01/app/oracle/product/11.2.0.4/dbhome_3/cfgtoollogs/CARDTEST/preupgrade/preupgrade.log
Report generated by Oracle Database Pre-Upgrade Information Tool Version
19.0.0.0.0 Build: 1 on 2021-02-09T11:56:20

Upgrade-To version: 19.0.0.0.0

=======================================
Status of the database prior to upgrade
=======================================
      Database Name:  CARDTEST
     Container Name:  Not Applicable in Pre-12.1 database
       Container ID:  Not Applicable in Pre-12.1 database
            Version:  11.2.0.4.0
     DB Patch Level:  No Patch Bundle applied
         Compatible:  11.2.0.4.0
          Blocksize:  8192
           Platform:  Linux x86 64-bit
      Timezone File:  14
  Database log mode:  ARCHIVELOG
           Readonly:  FALSE
            Edition:  EE

  Oracle Component                       Upgrade Action    Current Status
  ----------------                       --------------    --------------
  Oracle Server                          [to be upgraded]  VALID         
  JServer JAVA Virtual Machine           [to be upgraded]  VALID         
  Oracle XDK for Java                    [to be upgraded]  VALID         
  Real Application Clusters              [to be upgraded]  VALID         
  Oracle Workspace Manager               [to be upgraded]  VALID         
  OLAP Analytic Workspace                [to be upgraded]  VALID         
  Oracle Label Security                  [to be upgraded]  VALID         
  Oracle Database Vault                  [to be upgraded]  VALID         
  Oracle Enterprise Manager Repository   [to be upgraded]  VALID         
  Oracle Text                            [to be upgraded]  VALID         
  Oracle XML Database                    [to be upgraded]  VALID         
  Oracle Java Packages                   [to be upgraded]  VALID         
  Oracle Multimedia                      [to be upgraded]  VALID         
  Oracle Spatial                         [to be upgraded]  VALID         
  Expression Filter                      [to be upgraded]  VALID         
  Rule Manager                           [to be upgraded]  VALID         
  Oracle OLAP API                        [to be upgraded]  VALID         

==============
BEFORE UPGRADE
==============

  REQUIRED ACTIONS
  ================
  1.  Logged in AS SYSDBA, run $ORACLE_HOME/rdbms/admin/olspreupgrade.sql from
      the new Oracle Database 19 home.
      
      olspreupgrade.sql has not been run on this database.  To view the number
      of records that olspreupgrade.sql moves, use the following command:
      
        SELECT count(*) FROM system.aud$;
      
      As part of the upgrade to 19, records in the 11.2.0.4.0 audit table
      SYSTEM.AUD$ are moved to SYS.AUD$. This step can be manually performed
      before the upgrade to reduce downtime.  Refer to the 19 Oracle Label
      Security Administrator's Guide, or to Oracle Database Upgrade Guide for
      further details.

  2.  Resolve all outstanding distributed transactions prior to database
      upgrade.
      
      The database contains one or more unresolved distributed transactions
      found in sys.dba_2pc_pending.
      
      There can be no unresolved distributed transactions prior to database
      upgrade because the data they contain would be lost during the upgrade. 
      You can view the unresolved distributed transactions with
      
        SELECT * FROM sys.dba_2pc_pending;

  3.  (AUTOFIXUP) Empty the RECYCLEBIN immediately before database upgrade.
      
      The database contains 60 objects in the recycle bin.
      
      The recycle bin must be completely empty before database upgrade.

  RECOMMENDED ACTIONS
  ===================
  4.  Remove the EM repository.
      
      - Copy the $ORACLE_HOME/rdbms/admin/emremove.sql script from the target
      19 ORACLE_HOME into the source 11.2.0.4.0 ORACLE_HOME.
      
      Step 1: If database control is configured, stop EM Database Control,
      using the following command
      
        $> emctl stop dbconsole
      
      Step 2: Connect to the database using the SYS account AS SYSDBA
      
        SET ECHO ON;
        SET SERVEROUTPUT ON;
        @emremove.sql
      
      Without the set echo and serveroutput commands, you will not be able to
      follow the progress of the script.
      
      The database has an Enterprise Manager Database Control repository.
      
      Starting with Oracle Database 12c, the local Enterprise Manager Database
      Control does not exist anymore. The repository will be removed from your
      database during the upgrade.  This step can be manually performed before
      the upgrade to reduce downtime.

  5.  Run 11.2.0.4.0 $ORACLE_HOME/rdbms/admin/utlrp.sql to recompile invalid
      objects.  You can view the individual invalid objects with
      
        SET SERVEROUTPUT ON;
        EXECUTE DBMS_PREUP.INVALID_OBJECTS;
      
      75 objects are INVALID.
      
      There should be no INVALID objects in SYS/SYSTEM or user schemas before
      database upgrade.

  6.  Remove OLAP Catalog by running the 11.2.0.4.0 SQL script
      $ORACLE_HOME/olap/admin/catnoamd.sql script.
      
      The OLAP Catalog component, AMD, exists in the database.
      
      Starting with Oracle Database 12c, the OLAP Catalog (OLAP AMD) is
      desupported and will be automatically marked as OPTION OFF during the
      database upgrade if present. Oracle recommends removing OLAP Catalog
      (OLAP AMD) before database upgrade.  This step can be manually performed
      before the upgrade to reduce downtime.

  7.  Backup the existing ACLs and their assignments for reference. Use the new
      DBMS_NETWORK_ACL_ADMIN interfaces and dictionary views to administer
      network privileges after upgrade.
      
      The database contains network ACLs with privileges that will be migrated
      to a new format in 12c.
      
      Network access control list (ACL) privileges in 11g will be migrated to a
      new format in 12c. As part of the migration, new DBMS_NETWORK_ACL_ADMIN
      interfaces and dictionary views are provided, and privileges in the
      existing ACLs will be converted to the new format with new ACL names. The
      old ACL names, DBMS_NETWORK_ACL_ADMIN interfaces and dictionary views may
      continue to be used but are deprecated and their use is discouraged. For
      further information, refer to My Oracle Support note number 2078710.1.

  8.  Perform one of the following:
       1) Expire user accounts that use only the old 10G password version and
      follow the procedure recommended in Oracle Database Upgrade Guide under
      the section entitled, "Checking for Accounts Using Case-Insensitive
      Password Version".
       2) Explicitly set SQLNET.ALLOWED_LOGON_VERSION_SERVER in the 19
      SQLNET.ORA to a non-Exclusive Mode value, such as "11". (This is a short
      term approach and is not recommended because it will retain known
      security risks associated with the 10G password version.)
      
      Your database system has at least one account with only the 10G password
      version (see the PASSWORD_VERSIONS column of DBA_USERS).
      
      Starting with Oracle Database release 12.2.0.1, Exclusive Mode is the new
      default password-based authentication mode. All Exclusive Mode
      login/authentication attempts will fail for preexisting user accounts
      which only have the 10G password version and neither the 11G or 12C
      password version (see DBA_USERS.PASSWORD_VERSIONS.) For more information,
      refer to "Understanding Password Case Sensitivity and Upgrades" in the
      Oracle Database Upgrade Guide.

  9.  Upgrade Oracle Application Express (APEX) manually before the database
      upgrade.
      
      The database contains APEX version 3.2.1.00.12. Upgrade APEX to at least
      version 18.2.0.00.12.
      
      Starting with Oracle Database Release 18, APEX is not upgraded
      automatically as part of the database upgrade. Refer to My Oracle Support
      Note 1088970.1 for information about APEX installation and upgrades.

  10. Remove the SEC_CASE_SENSITIVE_LOGON instance initialization parameter
      setting, to configure your system to use case sensitive password
      authentication by default.
      
      Your database system is configured to enforce case insensitive password
      authentication (the SEC_CASE_SENSITIVE_LOGON instance initialization
      parameter setting is FALSE).
      
      Starting with Oracle Database release 12.2, Exclusive Mode is the default
      password-based authentication mode. Case insensitive password
      authentication is not supported in Exclusive Mode. If your system needs
      to use case insensitive password authentication, Exclusive Mode must be
      switched off prior to the upgrade. See the Network Reference Manual
      chapter about the SQLNET.ORA parameter
      SQLNET.ALLOWED_LOGON_VERSION_SERVER for more details on Exclusive Mode.

  11. Please make sure that all the MVs are refreshed and sys.sumdelta$ becomes
      empty before doing upgrade, unless you have strong business reasons not
      to do so. You can use dbms_mview.refresh() to refresh the MVs except
      those stale ones  to be kept due to business need. If there are any stale
      MVs depending on changes in sys.sumdelta$, do not truncate it, because
      doing so will cause wrong results after refresh. Please refer to the
      Materialized View section in MOS Note 2380601.1 for more details.
      
      There are one or more materialized views in either stale or invalid
      state, or which are currently being refreshed.
      
      Oracle recommends that all materialized views (MV's) are refreshed before
      upgrading the database because this will clear the MV logs and the
      sumdelta$ table and may reduce the upgrade time. If you choose to not
      refresh some MVs, the change data for those MV's will be carried through
      the UPGRADE process. After UPGRADE, you can refresh the MV's and  MV
      incremental refresh should work in normal cases.

  12. Review and remove any unnecessary HIDDEN/UNDERSCORE parameters.
      
      The database contains the following initialization parameters whose name
      begins with an underscore:
      
      _4031_dump_bitvec
      _gc_policy_minimum
      _gc_read_mostly_locking
      _highthreshold_undoretention
      _clusterwide_global_transactions
      _system_trig_enabled
      _optimizer_extended_cursor_sharing
      _optimizer_extended_cursor_sharing_rel
      _optimizer_adaptive_cursor_sharing
      _optimizer_cost_based_transformation
      
      Remove hidden parameters before database upgrade unless your application
      vendors and/or Oracle Support state differently.  Changes will need to be
      made in the pfile/spfile.

  13. (AUTOFIXUP) Gather stale data dictionary statistics prior to database
      upgrade in off-peak time using:
      
        EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS;
      
      Dictionary statistics do not exist or are stale (not up-to-date).
      
      Dictionary statistics help the Oracle optimizer find efficient SQL
      execution plans and are essential for proper upgrade timing. Oracle
      recommends gathering dictionary statistics in the last 24 hours before
      database upgrade.
      
      For information on managing optimizer statistics, refer to the 11.2.0.4
      Oracle Database Performance Tuning Guide.

  14. (AUTOFIXUP) Directly grant ADMINISTER DATABASE TRIGGER privilege to the
      owner of the trigger or drop and re-create the trigger with a user that
      was granted directly with such. You can list those triggers using: SELECT
      OWNER, TRIGGER_NAME FROM DBA_TRIGGERS WHERE
      TRIM(BASE_OBJECT_TYPE)='DATABASE' AND OWNER NOT IN (SELECT GRANTEE FROM
      DBA_SYS_PRIVS WHERE PRIVILEGE='ADMINISTER DATABASE TRIGGER').
      
      There is one or more database triggers whose owner does not have the
      right privilege on the database.
      
      The creation of database triggers must be done by users granted with
      ADMINISTER DATABASE TRIGGER privilege. Privilege must have been granted
      directly.

  INFORMATION ONLY
  ================
  15. Consider removing the following deprecated initialization parameters.
      
      Parameter
      ---------
      cluster_database_instances                                  
      sec_case_sensitive_logon                                    
      
      These deprecated parameters probably will be obsolete in a future release.

  16. Run $ORACLE_HOME/rdbms/admin/catnoexf.sql located in the new Oracle
      Database Oracle home to remove both EXF and RUL.
      
      Expression Filter (EXF) or Rules Manager (RUL) exist in the database.
      
      Starting with Oracle Database release 12.1, the Expression Filter (EXF)
      and Database Rules Manager (RUL) features are desupported, and are
      removed during the upgrade process.  This step can be manually performed
      before the upgrade to reduce downtime.

  17. Check the Oracle Backup and Recovery User's Guide for information on how
      to manage an RMAN recovery catalog schema.
      
      If you are using a version of the recovery catalog schema that is older
      than that required by the RMAN client version, then you must upgrade the
      catalog schema.
      
      It is good practice to have the catalog schema the same or higher version
      than the RMAN client version you are using.

  ORACLE GENERATED FIXUP SCRIPT
  =============================
  All of the issues in database CARDTEST
  which are identified above as BEFORE UPGRADE "(AUTOFIXUP)" can be resolved by
  executing the following

    SQL>@/u01/app/oracle/product/11.2.0.4/dbhome_3/cfgtoollogs/CARDTEST/preupgra
    de/preupgrade_fixups.sql

=============
AFTER UPGRADE
=============

  REQUIRED ACTIONS
  ================
  None

  RECOMMENDED ACTIONS
  ===================
  18. (AUTOFIXUP) If you use the -T option for the database upgrade, then run
      $ORACLE_HOME/rdbms/admin/utluptabdata.sql after the upgrade is complete,
      to VALIDATE and UPGRADE any user tables affected by changes to
      Oracle-Maintained types.
      
      There are user tables dependent on Oracle-Maintained object types.
      
      If the -T option is used to set user tablespaces to READ ONLY during the
      upgrade, user tables in those tablespaces, that are dependent on
      Oracle-Maintained types, will not be automatically upgraded. If a type is
      evolved during the upgrade, any dependent tables need to be re-validated
      and upgraded to the latest type version AFTER the database upgrade
      completes.

  19. To update the inactive DBIDs in AWR, run the script awrupd12.sql as
      SYSDBA.
      
      Inactive DBIDs were found in your Automatic Workload Repository (AWR).
      
      Inactve AWR DBIDs should be updated after the upgrade completes.

  20. Upgrade the database time zone file using the DBMS_DST package.
      
      The database is using time zone file version 14 and the target 19 release
      ships with time zone file version 32.
      
      Oracle recommends upgrading to the desired (latest) version of the time
      zone file.  For more information, refer to "Upgrading the Time Zone File
      and Timestamp with Time Zone Data" in the 19 Oracle Database
      Globalization Support Guide.

  21. Recreate directory objects to remove any symbolic links from directory
      paths.  To identify paths that contain symbolic links before upgrading,
      use OS commands like UNIX file or WINDOWS dir.  After upgrading, run
      $ORACLE_HOME/rdbms/admin/utldirsymlink.sql to identify directory objects
      with symbolic links in the path.
      
      Found 38 user directory objects to be checked: BHTTN_DIC, DATASIZ_PUMP,
      DV_ADMIN_DIR, EXPDIR, EXP_DIR_NEW, EXP_DIR_NEW2, FULL_METADATA_DIR,
      LOG_OWTDB01_LISTENER, LOG_OWTDB01_SCANLISTENER3,
      LOG_OWTDB02_SCANLISTENER2, OCLOG, PUMP_DIR, SERDAR_EXPORT, SIL_DIR,
      TABIMP, TEST_DIR, TOAD_TRACEFILE_DIR_1, TOAD_TRACEFILE_DIR_2, TRIAD_DIR,
      VTY_DIR, WS1_DATA, WS1_INFO, WS2_DATA, WS2_INFO, WS3_DATA, WS3_INFO,
      WS4_DATA, WS4_INFO, WS5_DATA, WS5_INFO, WS6_DATA, WS6_INFO, WS7_DATA,
      WS7_INFO, WS8_DATA, WS8_INFO, WS9_DATA, WS9_INFO.
      
      Starting in Release 18c, symbolic links are not allowed in directory
      object paths used with BFILE data types, the UTL_FILE package, or
      external tables.

  22. (AUTOFIXUP) Gather dictionary statistics after the upgrade using the
      command:
      
        EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS;
      
      Oracle recommends gathering dictionary statistics after upgrade.
      
      Dictionary statistics provide essential information to the Oracle
      optimizer to help it find efficient SQL execution plans. After a database
      upgrade, statistics need to be re-gathered as there can now be tables
      that have significantly changed during the upgrade or new tables that do
      not have statistics gathered yet.

  23. Gather statistics on fixed objects after the upgrade and when there is a
      representative workload on the system using the command:
      
        EXECUTE DBMS_STATS.GATHER_FIXED_OBJECTS_STATS;
      
      This recommendation is given for all preupgrade runs.
      
      Fixed object statistics provide essential information to the Oracle
      optimizer to help it find efficient SQL execution plans.  Those
      statistics are specific to the Oracle Database release that generates
      them, and can be stale upon database upgrade.
      
      For information on managing optimizer statistics, refer to the 11.2.0.4
      Oracle Database Performance Tuning Guide.

  INFORMATION ONLY
  ================
  24. Check the Oracle documentation for the identified components for their
      specific upgrade procedure.
      
      The database upgrade script will not upgrade the following Oracle
      components:  OLAP Catalog,OWB
      
      The Oracle database upgrade script upgrades most, but not all Oracle
      Database components that may be installed.  Some components that are not
      upgraded may have their own upgrade scripts, or they may be deprecated or
      obsolete.

  ORACLE GENERATED FIXUP SCRIPT
  =============================
  All of the issues in database CARDTEST
  which are identified above as AFTER UPGRADE "(AUTOFIXUP)" can be resolved by
  executing the following

    SQL>@/u01/app/oracle/product/11.2.0.4/dbhome_3/cfgtoollogs/CARDTEST/preupgra
    de/postupgrade_fixups.sql

